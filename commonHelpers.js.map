{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// key: 44685360-74500565ee10f6b109a60bbe8\nimport axios from \"axios\";\naxios.defaults.baseURL = \"https://pixabay.com/\";\n// axios.defaults.params = {API_KEY : '44685360-74500565ee10f6b109a60bbe8'}\n\n\nexport async function getImage(image, currentPage) {\n    // const URL = 'https://pixabay.com/api/';\n    // const API_KEY = '44685360-74500565ee10f6b109a60bbe8';\n    const params = {\n        key: '44685360-74500565ee10f6b109a60bbe8',\n        q: image,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: currentPage,\n       \n    };\n\n    // const url = `${URL}?${params}`;\n    const response = await axios.get('api/', { params });\n    \n    return response.data;\n   \n   \n    // fetch(url).then((response) => {\n    //     if (!response.ok) { throw new Error(response.status); }\n    //     return response.json();\n    // }).catch((error) => {\n    //     iziToast.error({\n    //       position: \"topRight\",\n    //         message: `${error}`, \n    //     });\n    //   });\n        \n        \n        // data => data.json());\n    \n};\n    \n","// функцііїдля відображення\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n    captionsData: 'alt',\n    captionsDelay: 250,\n});\n\n\nconst picturesList = document.querySelector('.gallery-list');\n\nexport function markupImages(images) { \n    const markup = images.map(image => {\n        return `<li class=\"gallery-item\">\n      <a href='${image.largeImageURL}' class=\"gallery-link\">\n      <img src='${image.webformatURL}' \n      alt='${image.tags}'\n    width=360\n      height=200\n      class=\"gallery-image\"/>\n    </a>\n      <div class=\"info-image\"> \n        <p class=\"info-text\"> LIKES: <span class=\"info-image-span\">${image.likes} </span></p>\n        <p class=\"info-text\"> VIEWS:<span class=\"info-image-span\">${image.views} </span></p>\n         <p class=\"info-text\"> COMMENTS:<span class=\"info-image-span\">${image.comments} </span></p>\n        <p class=\"info-text\"> DOWNLOADS:<span class=\"info-image-span\">${image.downloads} </span></p>\n      </div>\n    </li>`;\n    }).join('');\n  picturesList.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n \n}\n","// логіка додатку\n\nimport { getImage } from \"./js/pixabay-api\";\n// getImage(\"cat\").then((data) => { console.log(data) }).catch((error) => { console.log(error) });\n\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\n\nimport axios from \"axios\";\n\nimport {\n    markupImages,\n} from \"./js/render-functions\";\n\n\n\n const refs = { input: document.querySelector('.form-input'),\nbtn: document.querySelector('.search-btn'),\n    searchForm: document.querySelector('.search-form'),\n    picturesList: document.querySelector('.gallery-list'),\n    loader: document.querySelector('.loader'),\n    loader2: document.querySelector('.loader2'),\nloadBtn: document.querySelector('.load-btn'),\n};\n\nfunction showLoadBtn(){refs.loadBtn.classList.remove('hidden')}\nfunction hideLoadBtn(){refs.loadBtn.classList.add('hidden')}\n\nfunction showLoader() { refs.loader.classList.remove('hidden'); }\nfunction hideLoader() { refs.loader.classList.add('hidden'); }\n\nfunction showLoader2() { refs.loader2.classList.remove('hidden'); }\nfunction hideLoader2() { refs.loader2.classList.add('hidden'); }\n\nlet photosName;\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nrefs.searchForm.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    currentPage = 1;\n    photosName = refs.input.value.trim();\n    if (photosName === '') {\n        iziToast.warning({\n            title: 'warning',\n            message: 'Search field can not be empty!',\n            position: 'topRight'\n        });\n        return;\n    }\n\n    \nshowLoader()\n    refs.picturesList.innerHTML = \"\";\n    try {\n        const data = await getImage(photosName, currentPage);\n         maxPage = Math.ceil(data.total / perPage);\n        markupImages(data.hits);\n    hideLoader();\n\n\n        if (maxPage === 0) { iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            displayMode: 'once',\n        });\n            \n            return;\n        }\n        updateBtnStatus();\n         resetForm();\n    }\n    catch {\n        iziToast.error({\n            title: 'Error',\n            \n        });\n}\n  \n    // resetForm();      \n});\n\nrefs.loadBtn.addEventListener('click', async () => {\n    currentPage++;\n    hideLoadBtn();\n    showLoader2();\n    try {\n        const data = await getImage(photosName, currentPage);\n        hideLoader2();\n        markupImages(data.hits);\n\n         \n   \n    }\n    catch { iziToast.error({title: 'Error'})}\n    hideLoader2(); \n     skipElements();\n   updateBtnStatus();\n\n\n\n })\n\n\nfunction updateBtnStatus() { \n    if (currentPage >= maxPage)\n    {\n        hideLoadBtn();\n\n        if (maxPage !== 0) {  iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" })}\n       }\n    else { showLoadBtn(); }\n}\n\n    // .then(({ hits }) => {\n    //     if (hits.length === 0) {\n    //         iziToast.error({\n    //             title: 'Error',\n    //             message: 'Sorry, there are no images matching your search query. Please try again!',\n    //             position: 'topRight',\n    //             displayMode: 'once',\n    //         })\n    //         return;\n    //     }\n        // hideLoader()\n//         markupImages(hits);\n//         resetForm();\n\n//     }).catch((err) => {\n//         iziToast.error({\n//             position: \"topRight\",\n//             message: `${err}`,\n//         })\n//     }).finally(() => hideLoader());\n    \n    \n\n// })\nfunction resetForm() { refs.searchForm.reset(); }\nfunction skipElements() {\n    \n    const liElem = refs.picturesList.children[0];\n    const height = liElem.getBoundingClientRect().height;\n\n    scrollBy({\n        top: height,\n    behavior: 'smooth',})\n}"],"names":["axios","getImage","image","currentPage","params","lightbox","SimpleLightbox","picturesList","markupImages","images","markup","refs","showLoadBtn","hideLoadBtn","showLoader","hideLoader","showLoader2","hideLoader2","photosName","maxPage","perPage","e","iziToast","data","updateBtnStatus","resetForm","skipElements","height"],"mappings":"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"}